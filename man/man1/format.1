'\" t
.\" Automatically generated by Pandoc 2.17.0.1
.\"
.TH "format" 1 "" "" "" ""
.hy
.SH Format
.RS
.PP
Applies to: Windows Server 2022, Windows 10, Windows Server 2019
.RE
.PP
Formats a disk to accept Windows files.
You must be a member of the Administrators group to format a hard drive.
.RS
.PP
[!NOTE] You can also use the \f[B]format\f[R] command, with different
parameters, from the Recovery Console.
For more information about the recovery console, see Windows Recovery
Environment (Windows RE).
.RE
.SS Syntax
.IP
.nf
\f[C]
format volume [/FS:file-system] [/V:label] [/Q] [/L[:state]] [/A:size] [/C] [/I:state] [/X] [/P:passes] [/S:state]
format volume [/V:label] [/Q] [/F:size] [/P:passes]
format volume [/V:label] [/Q] [/T:tracks /N:sectors] [/P:passes]
format volume [/V:label] [/Q] [/P:passes]
format volume [/Q]
\f[R]
.fi
.SS Parameters
.PP
.TS
tab(@);
lw(31.5n) lw(38.5n).
T{
Parameter
T}@T{
Description
T}
_
T{
\f[C]<volume>\f[R]
T}@T{
Specifies the mount point, volume name, or drive letter (followed by a
colon) of the drive that you want to format.
If you do not specify any of the following command-line options,
\f[B]format\f[R] uses the volume type to determine the default format
for the disk.
T}
T{
/FS:filesystem
T}@T{
Specifies the type of file system (FAT, FAT32, NTFS, exFAT, ReFS, or
UDF).
T}
T{
/V:\f[C]<label>\f[R]
T}@T{
Specifies the volume label.
If you omit the \f[B]/V\f[R] command-line option or use it without
specifying a volume label, \f[B]format\f[R] prompts you for the volume
label after the formatting is complete.
Use the syntax \f[B]/V:\f[R] to prevent the prompt for a volume label.
If you use a single \f[B]format\f[R] command to format more than one
disk, all of the disks will be given the same volume label.
T}
T{
/A:\f[C]<size>\f[R]
T}@T{
Specifies the allocation unit size to use on FAT, FAT32, NTFS, exFAT, or
ReFS volumes.
If you don\[cq]t specify \f[I]unit size\f[R], it\[cq]s chosen based on
volume size.
Default settings are strongly recommended for general use.
The following list presents valid values for each type of file system
\f[I]unit size\f[R]:
T}
T{
/Q
T}@T{
Performs a quick format.
Deletes the file table and the root directory of a previously formatted
volume, but does not perform a sector-by-sector scan for bad areas.
You should use the \f[B]/Q\f[R] command-line option to format only
previously formatted volumes that you know are in good condition.
Note that \f[B]/Q\f[R] overrides \f[B]/Q\f[R].
T}
T{
/F:\f[C]<size>\f[R]
T}@T{
Specifies the size of the floppy disk to format.
When possible, use this command-line option instead of the \f[B]/T\f[R]
and \f[B]/T\f[R] command-line options.
Windows accepts the following values for size:
T}
T{
/T:\f[C]<tracks>\f[R]
T}@T{
Specifies the number of tracks on the disk.
When possible, use the \f[B]/F\f[R] command-line option instead.
If you use the \f[B]/T\f[R] option, you must also use the \f[B]/N\f[R]
option.
These options together provide an alternative method of specifying the
size of the disk that is being formatted.
This option is not valid with the \f[B]/F\f[R] option.
T}
T{
/N:\f[C]<sectors>\f[R]
T}@T{
Specifies the number of sectors per track.
When possible, use the \f[B]/F\f[R] command-line option instead of
\f[B]/N\f[R].
If you use \f[B]/N\f[R], you must also use \f[B]/T\f[R].
These two options together provide an alternative method of specifying
the size of the disk that is being formatted.
This option is not valid with the \f[B]/F\f[R] option.
T}
T{
/P:\f[C]<count>\f[R]
T}@T{
Zero every sector on the volume.
After that, the volume will be overwritten \f[B]count\f[R] times using a
different random number each time.
If \f[B]count\f[R] is zero, no additional overwrites are made after
zeroing every sector.
This switch is ignored when \f[B]/Q\f[R] is specified.
T}
T{
/C
T}@T{
NTFS only.
Files created on the new volume will be compressed by default.
T}
T{
/X
T}@T{
Forces the volume to dismount, if necessary, before it\[cq]s formatted.
Any open handles to the volume will no longer be valid.
T}
T{
/R
T}@T{
NTFS only.
Files created on the new volume will be compressed by default.
T}
T{
/D
T}@T{
UDF 2.50 only.
Metadata will be duplicated.
T}
T{
/L:\f[C]<state>\f[R]
T}@T{
NTFS only.
Overrides the default size of file record.
By default, a non-tiered volume will be formatted with small size file
records and a tiered volume will be formatted with large size file
records.
\f[B]/L\f[R] and \f[B]/L:enable\f[R] forces format to use large size
file records and \f[B]/L:disable\f[R] forces format to use small size
file records.
T}
T{
/S:\f[C]<state>\f[R]
T}@T{
Specifies support for short filenames.
State is either \f[B]enable\f[R] or \f[B]disable\f[R].
Short names are disabled by default.
T}
T{
/TXF:\f[C]<state>\f[R]
T}@T{
Specifies TxF is enabled/disabled.
State is either \f[B]enable\f[R] or \f[B]disable\f[R].
TxF is enabled by default
T}
T{
/I:\f[C]<state>\f[R]
T}@T{
ReFS only.
Specifies whether integrity should be enabled on the new volume.
State is either \f[B]enable\f[R] or \f[B]disable\f[R].
Integrity is enabled on storage that supports data redundancy by
default.
T}
T{
/DAX:\f[C]<state>\f[R]
T}@T{
NTFS only.
Enable direct access storage (DAX) mode for this volume.
In DAX mode, the volume is accessed via the memory bus, boosting IO
performance.
A volume can be formatted with DAX mode only if the hardware is DAX
capable.
State is either \f[B]enable\f[R] or \f[B]disable\f[R].
\f[B]/DAX\f[R] is considered the same as \f[B]/DAX:enable\f[R].
T}
T{
/LogSize::\f[C]<size>\f[R]
T}@T{
NTFS only Specifies the size for NTFS log file in kilobytes.
The minimum supported size is 2MB, so specifying a size smaller than 2MB
will result in a 2MB log file.
Zero indicates the default value, which generally depends on the volume
size.
T}
T{
/NoRepairLogs
T}@T{
NTFS only.
Disables NTFS repair logs.
If the \f[B]spotfix\f[R] flag for chkdsk is specified (i.e.\ chkdsk
/spotfix), this will not work.
T}
T{
/?
T}@T{
Displays help at the command prompt.
T}
.TE
.SS Remarks
.IP \[bu] 2
The \f[B]format\f[R] command creates a new root directory and file
system for the disk.
It can also check for bad areas on the disk, and it can delete all data
on the disk.
To be able to use a new disk, you must first use this command to format
the disk.
.IP \[bu] 2
After formatting a floppy disk, \f[B]format\f[R] displays the following
message:
.RS 2
.PP
\f[C]Volume label (11 characters, ENTER for none)?\f[R]
.PP
To add a volume label, type up to 11 characters (including spaces).
If you do not want to add a volume label to the disk, press ENTER.
.RE
.IP \[bu] 2
When you use the \f[B]format\f[R] command to format a hard disk, a
warning message similar to the following displays:
.RS 2
.IP
.nf
\f[C]
WARNING, ALL DATA ON NON-REMOVABLE DISK
DRIVE x: WILL BE LOST!
Proceed with Format (Y/N)? _
\f[R]
.fi
.PP
To format the hard disk, press \f[B]Y\f[R]; if you do not want to format
the disk, press \f[B]N\f[R].
.RE
.IP \[bu] 2
FAT file systems restrict the number of clusters to no more than 65526.
FAT32 file systems restrict the number of clusters to between 65527 and
4177917.
.IP \[bu] 2
NTFS compression is not supported for allocation unit sizes above 4096.
.RS 2
.RS
.PP
[!NOTE] \f[B]Format\f[R] will immediately stop processing if it
determines that the previous requirements can\[cq]t be met using the
specified cluster size.
.RE
.RE
.IP \[bu] 2
When formatting is complete, \f[B]format\f[R] displays messages that
show the total disk space, the spaces marked as defective, and the space
available for your files.
.IP \[bu] 2
You can speed up the formatting process by using the \f[B]/q\f[R]
command-line option.
Use this option only if there are no bad sectors on your hard disk.
.IP \[bu] 2
You shouldn\[cq]t use the \f[B]format\f[R] command on a drive that was
prepared by using the \f[B]subst\f[R] command.
You can\[cq]t format disks over a network.
.IP \[bu] 2
The following table lists each exit code and a brief description of its
meaning.
.RS 2
.PP
.TS
tab(@);
lw(31.5n) lw(38.5n).
T{
Exit code
T}@T{
Description
T}
_
T{
0
T}@T{
The format operation was successful.
T}
T{
1
T}@T{
Incorrect parameters were supplied.
T}
T{
4
T}@T{
A fatal error occurred (which is any error other than 0, 1, or 5).
T}
T{
5
T}@T{
The user pressed N in response to the prompt \[lq]Proceed with Format
(Y/N)?\[rq] to stop the process.
T}
.TE
.PP
You can check these exit codes by using the ERRORLEVEL environment
variable with the \f[B]if\f[R] batch command.
.RE
.SS Examples
.PP
To format a new floppy disk in drive A using the default size, type:
.IP
.nf
\f[C]
format a:
\f[R]
.fi
.PP
To perform a quick format operation on a previously formatted floppy
disk in drive A, type:
.IP
.nf
\f[C]
format a: /q
\f[R]
.fi
.PP
To format a floppy disk in drive A and assign it the volume label
\f[I]DATA\f[R], type:
.IP
.nf
\f[C]
format a: /v:DATA
\f[R]
.fi
.SS Additional References
.IP \[bu] 2
Command-Line Syntax Key
.SH AUTHORS
jasongerend.
