'\" t
.\" Automatically generated by Pandoc 2.17.0.1
.\"
.TH "icacls" 1 "" "" "" ""
.hy
.SH icacls
.PP
Displays or modifies discretionary access control lists (DACLs) on
specified files, and applies stored DACLs to files in specified
directories.
.RS
.PP
[!NOTE] This command replaces the deprecated cacls command.
.RE
.SS Syntax
.IP
.nf
\f[C]
icacls <filename> [/grant[:r] <sid>:<perm>[...]] [/deny <sid>:<perm>[...]] [/remove[:g|:d]] <sid>[...]] [/t] [/c] [/l] [/q] [/setintegritylevel <Level>:<policy>[...]]
icacls <directory> [/substitute <sidold> <sidnew> [...]] [/restore <aclfile> [/c] [/l] [/q]]
\f[R]
.fi
.SS Parameters
.PP
.TS
tab(@);
lw(31.5n) lw(38.5n).
T{
Parameter
T}@T{
Description
T}
_
T{
<filename>
T}@T{
Specifies the file for which to display or modify DACLs.
T}
T{
<directory>
T}@T{
Specifies the directory for which to display or modify DACLs.
T}
T{
/t
T}@T{
Performs the operation on all specified files in the current directory
and its subdirectories.
T}
T{
/c
T}@T{
Continues the operation despite any file errors.
Error messages will still be displayed.
T}
T{
/l
T}@T{
Performs the operation on a symbolic link instead of its destination.
T}
T{
/q
T}@T{
Suppresses success messages.
T}
T{
[/save <ACLfile> [/t] [/c] [/l] [/q]]
T}@T{
Stores DACLs for all matching files into an access control list (ACL)
file for later use with \f[B]/restore\f[R].
T}
T{
[/setowner <username> [/t] [/c] [/l] [/q]]
T}@T{
Changes the owner of all matching files to the specified user.
T}
T{
[/findsid <sid> [/t] [/c] [/l] [/q]]
T}@T{
Finds all matching files that contain a DACL explicitly mentioning the
specified security identifier (SID).
T}
T{
[/verify [/t] [/c] [/l] [/q]]
T}@T{
Finds all files with ACLs that are not canonical or have lengths
inconsistent with access control entry (ACE) counts.
T}
T{
[/reset [/t] [/c] [/l] [/q]]
T}@T{
Replaces ACLs with default inherited ACLs for all matching files.
T}
T{
[/grant[:r] <sid>:<perm>[\&...]]
T}@T{
Grants specified user access rights.
Permissions replace previously granted explicit permissions.
T}
T{
[/deny <sid>:<perm>[\&...]]
T}@T{
Explicitly denies specified user access rights.
An explicit deny ACE is added for the stated permissions and the same
permissions in any explicit grant are removed.
T}
T{
[/remove[:g | :d]] <sid>[\&...]
[/t] [/c] [/l] [/q]
T}@T{
Removes all occurrences of the specified SID from the DACL.
This command can also use:
T}
T{
[/setintegritylevel [(CI)(OI)] <Level>:<Policy>[\&...]]
T}@T{
Explicitly adds an integrity ACE to all matching files.
The level can be specified as:
T}
T{
[/substitute <sidold><sidnew> [\&...]]
T}@T{
Replaces an existing SID (\f[I]sidold\f[R]) with a new SID
(\f[I]sidnew\f[R]).
Requires using with the \f[C]<directory>\f[R] parameter.
T}
T{
/restore <ACLfile> [/c] [/l] [/q]
T}@T{
Applies stored DACLs from \f[C]<ACLfile>\f[R] to files in the specified
directory.
Requires using with the \f[C]<directory>\f[R] parameter.
T}
T{
/inheritancelevel: [e | d | r]
T}@T{
Sets the inheritance level, which can be:
T}
.TE
.SS Remarks
.IP \[bu] 2
SIDs may be in either numerical or friendly name form.
If you use a numerical form, affix the wildcard character \f[B]*\f[R] to
the beginning of the SID.
.IP \[bu] 2
This command preserves the canonical order of ACE entries as:
.RS 2
.IP \[bu] 2
Explicit denials
.IP \[bu] 2
Explicit grants
.IP \[bu] 2
Inherited denials
.IP \[bu] 2
Inherited grants
.RE
.IP \[bu] 2
The \f[C]<perm>\f[R] option is a permission mask that can be specified
in one of the following forms:
.RS 2
.IP \[bu] 2
A sequence of simple rights (basic permissions):
.RS 2
.IP \[bu] 2
\f[B]F\f[R] - Full access
.IP \[bu] 2
\f[B]M\f[R]- Modify access
.IP \[bu] 2
\f[B]RX\f[R] - Read and execute access
.IP \[bu] 2
\f[B]R\f[R] - Read-only access
.IP \[bu] 2
\f[B]W\f[R] - Write-only access
.RE
.IP \[bu] 2
A comma-separated list in parenthesis of specific rights (advanced
permissions):
.RS 2
.IP \[bu] 2
\f[B]D\f[R] - Delete
.IP \[bu] 2
\f[B]RC\f[R] - Read control (read permissions)
.IP \[bu] 2
\f[B]WDAC\f[R] - Write DAC (change permissions)
.IP \[bu] 2
\f[B]WO\f[R] - Write owner (take ownership)
.IP \[bu] 2
\f[B]S\f[R] - Synchronize
.IP \[bu] 2
\f[B]AS\f[R] - Access system security
.IP \[bu] 2
\f[B]MA\f[R] - Maximum allowed
.IP \[bu] 2
\f[B]GR\f[R] - Generic read
.IP \[bu] 2
\f[B]GW\f[R] - Generic write
.IP \[bu] 2
\f[B]GE\f[R] - Generic execute
.IP \[bu] 2
\f[B]GA\f[R] - Generic all
.IP \[bu] 2
\f[B]RD\f[R] - Read data/list directory
.IP \[bu] 2
\f[B]WD\f[R] - Write data/add file
.IP \[bu] 2
\f[B]AD\f[R] - Append data/add subdirectory
.IP \[bu] 2
\f[B]REA\f[R] - Read extended attributes
.IP \[bu] 2
\f[B]WEA\f[R] - Write extended attributes
.IP \[bu] 2
\f[B]X\f[R] - Execute/traverse
.IP \[bu] 2
\f[B]DC\f[R] - Delete child
.IP \[bu] 2
\f[B]RA\f[R] - Read attributes
.IP \[bu] 2
\f[B]WA\f[R] - Write attributes
.RE
.IP \[bu] 2
Inheritance rights may precede either \f[C]<perm>\f[R] form:
.RS 2
.IP \[bu] 2
\f[B](I)\f[R] - Inherit.
ACE inherited from the parent container.
.IP \[bu] 2
\f[B](OI)\f[R] - Object inherit.
Objects in this container will inherit this ACE.
Applies only to directories.
.IP \[bu] 2
\f[B](CI)\f[R] - Container inherit.
Containers in this parent container will inherit this ACE.
Applies only to directories.
.IP \[bu] 2
\f[B](IO)\f[R] - Inherit only.
ACE inherited from the parent container, but does not apply to the
object itself.
Applies only to directories.
.IP \[bu] 2
\f[B](NP)\f[R] - Do not propagate inherit.
ACE inherited by containers and objects from the parent container, but
does not propagate to nested containers.
Applies only to directories.
.RE
.RE
.SS Examples
.PP
To save the DACLs for all files in the C:directory and its
subdirectories to the ACLFile file, type:
.IP
.nf
\f[C]
icacls c:\[rs]windows\[rs]* /save aclfile /t
\f[R]
.fi
.PP
To restore the DACLs for every file within ACLFile that exists in the
C:directory and its subdirectories, type:
.IP
.nf
\f[C]
icacls c:\[rs]windows\[rs] /restore aclfile
\f[R]
.fi
.PP
To grant the user User1 Delete and Write DAC permissions to a file named
Test1, type:
.IP
.nf
\f[C]
icacls test1 /grant User1:(d,wdac)
\f[R]
.fi
.PP
To grant the user defined by SID S-1-1-0 Delete and Write DAC
permissions to a file, named Test2, type:
.IP
.nf
\f[C]
icacls test2 /grant *S-1-1-0:(d,wdac)
\f[R]
.fi
.SS Additional References
.IP \[bu] 2
Command-Line Syntax Key
.SH AUTHORS
JasonGerend.
